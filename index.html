<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relógio Digital Corporativo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        /* Main container */
        .clock-container {
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            overflow: hidden;
            width: 100%;
            max-width: 1200px;
            height: 480px;
            display: flex;
            transition: all 0.3s ease;
        }
        
        /* Clock section */
        .clock-section {
            width: 50%;
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
            position: relative;
            color: white;
        }
        
        /* Fullscreen button */
        .fullscreen-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .fullscreen-btn:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }
        
        /* Clock face */
        .clock-face {
            text-align: center;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }
        
        .time {
            font-size: 72px;
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .time span {
            margin: 0 5px;
        }
        
        .date {
            font-size: 24px;
            opacity: 0.9;
            margin-bottom: 30px;
        }
        
        /* Greeting */
        .greeting {
            font-size: 20px;
            margin-bottom: 5px;
        }
        
        /* Blinking colon animation */
        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0.3; }
            100% { opacity: 1; }
        }
        
        .blinking-colon {
            animation: blink 2s infinite;
        }
        
        /* Content section */
        .content-section {
            width: 50%;
            background-color: white;
            position: relative;
            overflow: hidden;
        }
        
        .content-container {
            position: relative;
            height: 100%;
            width: 100%;
        }
        
        .content-item {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s ease;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .content-item.active {
            opacity: 1;
        }
        
        /* Quote styles */
        .quote-icon {
            color: #3b82f6;
            margin-bottom: 20px;
        }
        
        .quote-icon i {
            font-size: 36px;
            opacity: 0.3;
        }
        
        .quote-content {
            font-size: 24px;
            line-height: 1.6;
            text-align: center;
            margin-bottom: 20px;
            font-weight: 500;
            max-width: 90%;
        }
        
        .quote-meaning {
            font-size: 18px;
            color: #4b5563;
            text-align: center;
            max-width: 80%;
        }
        
        /* Quiz styles */
        .quiz-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 10px;
        }
        
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .quiz-category {
            background-color: #3b82f6;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .quiz-question {
            font-size: 24px;
            line-height: 1.4;
            text-align: center;
            margin-bottom: 15px;
            font-weight: 500;
            padding: 0 10px;
        }
        
        .quiz-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            width: 100%;
            margin-top: 15px;
        }
        
        .quiz-option {
            background-color: #f3f4f6;
            padding: 15px;
            border-radius: 8px;
            cursor: default;
            transition: all 0.2s ease;
            text-align: center;
            font-size: 18px;
        }
        
        .quiz-option.correct {
            background-color: #d1fae5;
            color: #065f46;
            border-left: 4px solid #10b981;
        }
        
        .quiz-option.incorrect {
            background-color: #fee2e2;
            color: #b91c1c;
            border-left: 4px solid #ef4444;
        }
        
        /* Logo styles */
        .logo-container {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .logo-image {
            max-width: 80%;
            max-height: 80%;
            object-fit: contain;
        }
        
        /* Progress bar */
        .progress-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 4px;
            background-color: #3b82f6;
            transition: width 0.1s linear;
            width: 0%;
        }
    </style>
</head>
<body>
    <div class="clock-container">
        <!-- Clock Section (Left Side) -->
        <div class="clock-section">
            <!-- Fullscreen Button -->
            <button id="fullscreen-btn" class="fullscreen-btn">
                <i class="fas fa-expand"></i>
            </button>
            
            <!-- Digital Clock -->
            <div class="clock-face">
                <div id="time" class="time">
                    <span id="hours">00</span>
                    <span class="blinking-colon">:</span>
                    <span id="minutes">00</span>
                    <span class="blinking-colon">:</span>
                    <span id="seconds">00</span>
                </div>
                <div id="date" class="date">
                    <span id="weekday">Segunda-feira</span>, 
                    <span id="day">01</span> de 
                    <span id="month">Janeiro</span> de 
                    <span id="year">2023</span>
                </div>
            </div>
            
            <!-- Additional Info -->
            <div class="greeting-container">
                <div id="greeting" class="greeting">Bom dia!</div>
            </div>
        </div>
        
        <!-- Content Section (Right Side) -->
        <div class="content-section">
            <div class="content-container">
                <!-- Quote Content -->
                <div id="quote-content" class="content-item">
                    <div class="quote-icon">
                        <i class="fas fa-quote-left"></i>
                    </div>
                    <div class="quote-content" id="quote-text">Carregando frase...</div>
                    <div class="quote-meaning" id="quote-meaning"></div>
                    <div class="progress-bar" id="quote-progress"></div>
                </div>
                
                <!-- Quiz Content -->
                <div id="quiz-content" class="content-item">
                    <div class="quiz-container">
                        <div class="quiz-header">
                            <div class="quiz-category" id="quiz-category">Geral</div>
                        </div>
                        <div class="quiz-question" id="quiz-question">Carregando pergunta...</div>
                        <div class="quiz-options" id="quiz-options"></div>
                    </div>
                    <div class="progress-bar" id="quiz-progress"></div>
                </div>
                
                <!-- Logo Content -->
                <div id="logo-content" class="content-item">
                    <div class="logo-container">
                        <img src="https://i.ibb.co/JWmLZ6kr/marcagov.png" alt="Logo da Empresa" class="logo-image">
                    </div>
                    <div class="progress-bar" id="logo-progress"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Current active content index
        let currentContentIndex = 0;
        const contentItems = ['quote', 'quiz', 'logo'];
        let rotationInterval;
        let quoteData = null;
        let quizData = null;
        let showQuizAnswer = false;
        
        // Update clock function
        function updateClock() {
            const now = new Date();
            
            // Time
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');
            
            document.getElementById('hours').textContent = hours;
            document.getElementById('minutes').textContent = minutes;
            document.getElementById('seconds').textContent = seconds;
            
            // Date
            const weekdays = ['Domingo', 'Segunda-feira', 'Terça-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'Sábado'];
            const months = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];
            
            document.getElementById('weekday').textContent = weekdays[now.getDay()];
            document.getElementById('day').textContent = now.getDate();
            document.getElementById('month').textContent = months[now.getMonth()];
            document.getElementById('year').textContent = now.getFullYear();
            
            // Greeting based on time of day
            const greeting = document.getElementById('greeting');
            const hour = now.getHours();
            
            if (hour >= 5 && hour < 12) {
                greeting.textContent = 'Bom dia, Detin!';
            } else if (hour >= 12 && hour < 18) {
                greeting.textContent = 'Boa tarde, Detin!';
            } else {
                greeting.textContent = 'Boa noite, Detin!';
            }
            
            // Check if we're in the last 10 minutes of the hour to show quiz answers
            const currentMinutes = now.getMinutes();
            showQuizAnswer = currentMinutes >= 50;
            
            // Update quiz display if it's active
            if (quizData && document.getElementById('quiz-content').classList.contains('active')) {
                displayQuiz(quizData, showQuizAnswer);
            }
            
            // Check if we need to fetch new data (every hour at minute 0)
            if (minutes === '00' && seconds === '00') {
                fetchQuote();
                fetchQuiz();
            }
        }
        
        // Fetch random quote
        async function fetchQuote() {
            try {
                const response = await fetch('https://ditado-api.fly.dev/ditados/random');
                const data = await response.json();
                quoteData = data;
                
                // Update display if quote is currently active
                if (document.getElementById('quote-content').classList.contains('active')) {
                    displayQuote(data);
                }
            } catch (error) {
                console.error('Error fetching quote:', error);
                document.getElementById('quote-text').textContent = "Não foi possível carregar a frase. Tente novamente mais tarde.";
                document.getElementById('quote-meaning').textContent = "";
            }
        }
        
        // Display quote
        function displayQuote(data) {
            document.getElementById('quote-text').textContent = data.content;
            document.getElementById('quote-meaning').textContent = data.meaning;
        }
        
        // Fetch random quiz question
        async function fetchQuiz() {
            try {
                const response = await fetch('https://tryvia.ptr.red/api.php?amount=1&lang=pt');
                const data = await response.json();
                const quizQuestion = data.results[0];
                
                // Combine and shuffle answers once when fetching
                const allAnswers = [...quizQuestion.incorrect_answers, quizQuestion.correct_answer];
                const shuffledAnswers = allAnswers.sort(() => Math.random() - 0.5);
                
                // Store the shuffled answers with the quiz data
                quizData = {
                    ...quizQuestion,
                    shuffledAnswers: shuffledAnswers
                };
                
                // Update display if quiz is currently active
                if (document.getElementById('quiz-content').classList.contains('active')) {
                    displayQuiz(quizData, showQuizAnswer);
                }
            } catch (error) {
                console.error('Error fetching quiz:', error);
                document.getElementById('quiz-question').textContent = "Não foi possível carregar a pergunta. Tente novamente mais tarde.";
                document.getElementById('quiz-options').innerHTML = "";
            }
        }
        
        // Display quiz with pre-shuffled answers
        function displayQuiz(data, showAnswer) {
            document.getElementById('quiz-category').textContent = data.category;
            document.getElementById('quiz-question').textContent = data.question;
            
            const optionsContainer = document.getElementById('quiz-options');
            optionsContainer.innerHTML = "";
            
            // Display answers in their shuffled order
            data.shuffledAnswers.forEach(answer => {
                const option = document.createElement('div');
                option.className = 'quiz-option';
                option.textContent = answer;
                
                if (showAnswer) {
                    if (answer === data.correct_answer) {
                        option.classList.add('correct');
                    } else {
                        option.classList.add('incorrect');
                    }
                }
                
                optionsContainer.appendChild(option);
            });
        }
        
        // Rotate content every 20 seconds
        function rotateContent() {
            // Hide all content items
            document.querySelectorAll('.content-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show current content item
            document.getElementById(`${contentItems[currentContentIndex]}-content`).classList.add('active');
            
            // Reset progress bars
            document.querySelectorAll('.progress-bar').forEach(bar => {
                bar.style.width = '0%';
            });
            
            // Animate progress bar
            const progressBar = document.getElementById(`${contentItems[currentContentIndex]}-progress`);
            let width = 0;
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                } else {
                    width += 0.5;
                    progressBar.style.width = `${width}%`;
                }
            }, 100);
            
            // Move to next content item
            currentContentIndex = (currentContentIndex + 1) % contentItems.length;
        }
        
        // Initialize content rotation
        function initContentRotation() {
            // Start with first content
            rotateContent();
            
            // Set interval for rotation (20 seconds)
            rotationInterval = setInterval(rotateContent, 20000);
        }
        
        // Fullscreen functionality
        document.getElementById('fullscreen-btn').addEventListener('click', toggleFullscreen);
        
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.error(`Error attempting to enable fullscreen: ${err.message}`);
                });
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }
        
        // Initialize the application
        function init() {
            // Update clock immediately and then every second
            updateClock();
            setInterval(updateClock, 1000);
            
            // Fetch initial data
            fetchQuote();
            fetchQuiz();
            
            // Start content rotation
            initContentRotation();
        }
        
        // Start the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>